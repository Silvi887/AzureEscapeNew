@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}


@using AzureApp.ViewModels;
@model List<VilaIndexViewModel>

<div class="backimage">
	<!-- Search section-->

	<div class="search-overlay divsearch w-100">
		
		<div class="container">
			<form asp-controller="Vila" asp-action="SearchVilaByDate" method="get" class="row g-3 p-3 rounded shadow">
				<div class="col-md-4">
					<label for="startDate" class="form-label">Start Date</label>
					<input type="date" id="startDate" name="startDate" class="form-control" required />
				</div>
				<div class="col-md-4">
					<label for="endDate" class="form-label">End Date</label>
					<input type="date" id="endDate" name="endDate" class="form-control" required />
				</div>
				<div class="col-md-4 d-flex align-items-end">
					<button type="submit" class="btn btn-primary w-100" style="background-color:#637496; color:#fff">
						<i class="fa fa-search"></i> Search Villas
					</button>
				</div>
			</form>
		</div>
	</div>
</div>

<div class="text-center">
	<h1 class="display-4">Holidays</h1>
@* 		<p>Learn about <a href="https://learn.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>
 *@	<hr />
	<div class="container">

		<div class="row4">
			@foreach (var villa in Model)
			{
				<div class="classItem">
					<h4> @villa.NameVilla </h4>
					<img src=@villa.ImageUrl alt="" />

					<div class="classraiting"> <div><span class="nameplace-btn"> @villa.NamePlace</span></div>&nbsp;&nbsp; &nbsp;&nbsp;  Rating: ⭐ @villa.Raiting</div>
				
					<ul>
						<li><span> Address: </span>@villa.VillaAddress </li>
						<li><span> Count Adults:</span>@villa.CountAdults</li>
						<li> <span> Count Children: @villa.CountChildren</span> </li>
						<li><span> Location Name: @villa.LocationName</span></li>
						
					</ul>

					<div class="classBtns">
						<a asp-controller="Vila" asp-action="Details" asp-route-id="@villa.IdVilla" class="btn btn-info">
							<i class="fa fa-info-circle"></i> More info
						</a>

						@if (User?.Identity?.IsAuthenticated == true && ViewBag.EmailConfirmed == false)
						{

							<a asp-controller="Reserve" asp-action="AddBooking" asp-route-id="@($"{villa.IdVilla},{villa.NameVilla}")" class="btn btn-info w-70">
								<i class="fa fa-calendar-check-o"></i> Make reservation
							</a>

							<form asp-controller="Favorite" asp-action="GetFavorite" asp-route-id="@villa.IdVilla" method="post" class="w-50">
								<input type="hidden" name="id" value="@villa.IdVilla" />
								<button type="submit" class="btn btn-success w-100">
									<i class="fa fa-heart"></i> Favorites
								</button>
							</form>
						}

					</div>
					

				</div>
			}


		</div>
	</div>
</div>

